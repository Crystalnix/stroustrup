{% extends 'book_library/books_mainpage.html' %}
{% load crispy_forms_tags %}
{% block title %}Request new book.{% endblock %}
{% block location %}Requests page{% endblock %}
{% block link_extension %}
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/book_index.css' %}" xmlns="http://www.w3.org/1999/html"/>

    <link rel="stylesheet" href="{% static 'css/request.css' %}"/>
{% endblock %}

{% block extensions %}

    <script language="JavaScript">

        $(document).ready((function(){
           // $('label[for="id_title"]').remove();
           // $('label[for="id_url"]').remove();

           // $('#id_title').attr('class','form-control').attr('placeholder','Title');
           // $('#id_url').attr('class','form-control').attr('placeholder','Paste URL here');
           // $('ul[class="errorlist"]').wrap('<div class="alert alert-danger"></div>');
           // $('#request_bar').attr('class', 'active');
           // $('#id_title').parent().attr('class','col-md-5');
           // $('#id_title').attr('required','');
           // $('#id_url').parent().attr('class','col-md-5');
           // $('#id_url').attr('required','');
           // $('#id_button').parent().attr('class','col-md-2');
        }));


    </script>
{% endblock %}


{% block content %}

                    {% crispy form form.helper %}



            <div class="well">
                <h4>Look, what is already ordered:</h4>





    {% if object_list %}
        {% for order in object_list %}

            <div class="panel panel-default" id="request{{ order.id }}">
                <div class="panel-heading">

                    <span class="glyphicon glyphicon-plus-sign"></span>
                            <a  target="_blank" class="title" href='{{ order.url }}'>
                                {{ order.title }}
                            </a>

                </div>
                <div class="panel-body" >
                    <h3 class="pull-left">
                        Ordered by <a href="{% url "profile:profile" order.user.pk  %}">  <span class="comment_name"> {{ order.user }} </span></a>
                        <p>Liked:
                        <span id="userslist{{ order.id }}">
                            {% for i in order.users.all %}
                               {{ i.username }}
                            {% endfor %}

                        </span>
                        </p>
                    </h3>

                        <div class="pull-right">


                        <h2>
                        <span id="counter{{ order.id }}">
                           {{ order.vote}}
                        </span>
                            <a id="like_{{ order.id }}"
                               href="#"
                               onclick="like_request({{ order.id }}); return false;"
                               class="btn btn-success"
                                    >
                                <span class="glyphicon glyphicon-heart"></span>
                            </a>
                        </h2>

                        </div>


                </div>

            </div>
            <div class="row offset"></div>

        {% endfor %}
    {% else %}
        <div class="col-md-4 col-md-offset-4">
            <div class="panel panel-danger">
                <div class="panel-heading"><span class="glyphicon glyphicon-remove-sign"></span> </div>
                <div class="panel-body">

                    Here are no orders. Yet...


                </div>
            </div>

        </div>
    {% endif %}
    </div>
    {% include "book_library/pagination.html"  %}
{% endblock %}


